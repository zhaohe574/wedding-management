# 小程序前端开发进展文档

**项目名称**: 婚庆管家（Wedding Host Manager）  
**文档版本**: v1.0.0  
**创建日期**: 2025-01-06

---

## 一、分支管理

### 1.1 分支创建记录

**日期**: 2025-01-06

**操作**: 从 main 分支创建小程序前端开发分支

**分支信息**:
- **分支名称**: `miniapp-dev`
- **源分支**: `main`
- **远端仓库**: `https://github.com/zhaohe574/wedding-management.git`
- **分支状态**: ✅ 已创建并推送到远端

**操作步骤**:
1. 切换到 main 分支
2. 拉取最新的 main 分支代码
3. 创建本地分支 `miniapp-dev`
4. 推送分支到远端并设置上游跟踪

**验证结果**:
- ✅ 本地分支创建成功
- ✅ 远端分支创建成功
- ✅ 分支跟踪关系已设置

**当前分支列表**:
- `main` (根分支)
- `backend-dev` (后端开发分支)
- `admin-frontend-dev` (管理前端开发分支)
- `miniapp-dev` (小程序前端开发分支) ⭐ 新建

---

## 二、开发环境准备

### 2.1 小程序项目结构

**项目路径**: `wedding-management-miniapp/`

**技术栈**:
- uni-app
- TypeScript
- Vue 3
- Vite
- Tuniao UI V3 (待配置)
- Pinia (待配置)

**当前状态**: 
- ⏳ 项目已初始化
- ⏳ TypeScript 已配置
- ⏳ 依赖配置待完善
- ⏳ UI框架待集成

---

## 三、开发计划

### 3.1 环境配置
- [ ] 配置 Tuniao UI V3
- [ ] 配置 Pinia 状态管理
- [ ] 配置请求封装
- [ ] 配置路由守卫（按角色控制）

### 3.2 公共组件开发
- [ ] host-card 主持人卡片
- [ ] order-card 订单卡片
- [ ] dynamic-card 动态卡片
- [ ] date-picker 日期选择器
- [ ] period-picker 场次选择器
- [ ] empty-state 空状态
- [ ] loading 加载组件
- [ ] message-badge 消息角标
- [ ] share-button 分享按钮

### 3.3 工具函数开发
- [ ] useAuth Hook（认证，包含角色判断）
- [ ] useRole Hook（角色权限判断）
- [ ] useMessage Hook（消息处理）
- [ ] useShare Hook（分享处理）
- [ ] 路由守卫（按角色控制页面访问）

### 3.4 页面开发（所有用户）
- [ ] 首页 (index)
- [ ] 主持人列表页
- [ ] 主持人详情页（含分享功能）
- [ ] 档期选择页
- [ ] 动态列表页
- [ ] 动态详情页（含分享功能）
- [ ] 消息中心页
- [ ] 登录页

### 3.5 页面开发（普通用户）
- [ ] 订单创建页
- [ ] 订单列表页（用户视角）
- [ ] 订单详情页（用户视角，含上传付款凭证、分享功能）
- [ ] 评价提交页
- [ ] 我的收藏页

### 3.6 页面开发（主持人）
- [ ] 工作台首页
- [ ] 订单列表页（主持人视角）
- [ ] 订单详情页（主持人视角，含审核操作）
- [ ] 档期日历页
- [ ] 档期设置页
- [ ] 动态管理页
- [ ] 发布动态页
- [ ] 评价管理页（回复评价）
- [ ] 个人资料页

### 3.7 个人中心（按角色显示）
- [ ] 个人中心首页（根据角色显示不同菜单，含消息角标）
- [ ] 普通用户：我的订单、我的收藏、我的评价、消息中心
- [ ] 服务提供者：工作台、我的订单、档期管理、动态管理、评价管理、消息中心
- [ ] 客服入口（调用微信小程序客服）

---

## 四、技术要点

### 4.1 角色权限控制
- 统一应用，通过角色权限中间件区分功能
- 路由守卫按角色控制页面访问
- 页面内容按角色动态显示

### 4.2 分享功能
- 主持人详情页分享
- 动态详情页分享
- 订单详情页分享
- 分享记录追踪

### 4.3 消息处理
- 消息列表展示
- 未读消息数统计
- 消息角标显示
- 消息已读标记

---

**最后更新**: 2025-01-06

